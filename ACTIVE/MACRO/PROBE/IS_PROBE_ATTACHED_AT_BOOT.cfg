[gcode_macro IS_PROBE_ATTACHED_AT_BOOT]
gcode:
    #_CheckProbe action=query
    {% set probe_attached = printer["gcode_macro _Probe_Variables"].probe_attached %}
    {% set probe_lock = printer["gcode_macro _Probe_Variables"].probe_lock %}
    #QUERY_PROBE_OUTPUT
    QUERY_PROBE
    {% if probe_attached and (not printer.probe.last_query) %} 
            MSG_PROBE_ATTACHED
    {% elif (not probe_attached) and  printer.probe.last_query %} 
            MSG_PROBE_DOCKED
    {% else %}
            M118 "Confilicting information about Probe location, run '_CheckProbe action=query' command"
    {% endif %}
    