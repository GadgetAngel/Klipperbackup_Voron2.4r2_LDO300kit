#.................................................................................................................
# _CG28 - No additional options / Usage: _CG28
#   Conditional G28 (home if not already homed)
#.................................................................................................................
# Required variable(s) to be set. Add the following to your global variable dictionary block as:
#
# ---NONE---
#.................................................................................................................
# Required external macro(s) used by this macro.
#
# _general_Debug
# STATUS_HOMING
# G28
#.................................................................................................................

#.................................................................................................................
#
## URL Resources: https://ellis3dp.com/Print-Tuning-Guide/articles/useful_macros/conditional_homing.html
#      
#.................................................................................................................

# Conditional G28 (home if not already homed)
[gcode_macro _CG28]
gcode:
    _general_Debug msg="_CG28 - enter"
    {% if "xyz" not in printer.toolhead.homed_axes %}
        _general_Debug msg="_C28 Homing all axes"
        STATUS_HOMING
        G28
    {% endif %}
    _general_Debug msg="_CG28 - exit"